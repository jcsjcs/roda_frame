<h1>TEST</h1>
<p>test</p>
<ol>
  <li>1</li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
  <li>5</li>
  <li>6</li>
</ol>
<button>Add a Functional Area</button>
<a href="/security/functional_areas/functional_areas/new">New func area</a>
<!--
<section id="section-1" data-crossbeams_callback_section="the_url_here" class="crossbeams_layout">
  <h2>caption</h2>
  <div class="content-target content-loading"></div>
</section>
-->
<style>
    /* style would normally go in a .css file, however putting in here to keep example in fewer files */

    /* all of these styles are particular to this example. if copying this example, you don't copy the styles,
       you should lay out and style your own component as you want yourself. */

    .full-width-panel {
        position: relative;
        background: beige; /* #fafafa; */
        height: 100%;
        width: 100%;
        padding: 5px;
        box-sizing: border-box;
        border-left: 2px solid grey;
        border-bottom: 2px solid lightgray;
        border-right: 2px solid lightgray;
    }
    .call-record-cell {
        text-align: right;
    }
    .full-width-detail {
        padding-top: 4px;
    }
    .full-width-details {
        float: left;
        padding: 5px;
        margin: 5px;
        width: 150px;
    }
    .full-width-grid {
         margin-left: 100px; 
        padding-top: 35px;
        box-sizing: border-box;
        display: block;
        height: 100%;
    }
    .full-width-grid-toolbar {
        top: 8px;
        left: 30px;
        /* margin-left: 150px; */
        display: block;
        position: absolute;
    }
    .full-width-phone-icon {
        padding-right: 10px;
    }
    .full-width-search {
        border: 1px solid #eee;
        margin-left: 10px;
    }

/* Dropdown Button */
.dropbtn {
    /*background-color: #4CAF50;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none; */
    cursor: pointer;
    font-size: 11px;
    height: 18px;
}

/* Dropdown button on hover & focus */
.dropbtn:hover, .dropbtn:focus {
    background-color: #3e8e41;
}

/* The container <div> - needed to position the dropdown content */
.crossbeams-action-dropdown {
    position: relative;
    display: inline-block;
    /* height: 16px; */
}

/* Dropdown Content (Hidden by Default) */
.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 99;
}

/* Links inside the dropdown */
.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

/* Change color of dropdown links on hover */
.dropdown-content a:hover {background-color: #f1f1f1}

/* Show the dropdown menu (use JS to add this class to the .dropdown-content container when the user clicks on the dropdown button) */
.showActionDropdown {
  display:block;
}
  </style>
<div id="myGrid" class="ag-fresh" style="height: 400px"></div>
 <% content_for :late_javascript do %>
   <script>
     // var thirdLevelRowData = [
     var rowData = [
  {
    "id": "2",
    "functional_area_name": "Master files",
    "active": "t",
    "created_at": "2017-06-01 19:45:07.195069",
    "updated_at": "2017-06-01 19:45:07.195071",
    "programs": [
      {
        "id": "5",
        "program_name": "accounts",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.139262",
        "updated_at": "2017-06-01 19:46:49.139262",
        "progfuncs": [
          {
            "id": "38",
            "program_function_name": "list accounts",
            "group_name": null,
            "url": "\/party_manager\/account\/list_accounts",
            "program_function_sequence": "1",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.147779",
            "updated_at": "2017-06-01 19:46:49.14778"
          },
          {
            "id": "39",
            "program_function_name": "search accounts",
            "group_name": null,
            "url": "\/party_manager\/account\/search_accounts_flat",
            "program_function_sequence": "2",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.155767",
            "updated_at": "2017-06-01 19:46:49.155768"
          },
          {
            "id": "40",
            "program_function_name": "find accounts",
            "group_name": null,
            "url": "\/party_manager\/account\/search_accounts_hierarchy",
            "program_function_sequence": "3",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.163762",
            "updated_at": "2017-06-01 19:46:49.163763"
          },
          {
            "id": "41",
            "program_function_name": "new account",
            "group_name": null,
            "url": "\/party_manager\/account\/new_account",
            "program_function_sequence": "4",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.172091",
            "updated_at": "2017-06-01 19:46:49.172093"
          },
          {
            "id": "42",
            "program_function_name": "list account types",
            "group_name": null,
            "url": "\/party_manager\/account\/list_account_types",
            "program_function_sequence": "5",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.184212",
            "updated_at": "2017-06-01 19:46:49.184213"
          },
          {
            "id": "43",
            "program_function_name": "new account type",
            "group_name": null,
            "url": "\/party_manager\/account\/new_account_type",
            "program_function_sequence": "6",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.194959",
            "updated_at": "2017-06-01 19:46:49.19496"
          },
          {
            "id": "44",
            "program_function_name": "add acc to party_role",
            "group_name": null,
            "url": "\/party_manager\/account\/add_account_party_role",
            "program_function_sequence": "7",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.206431",
            "updated_at": "2017-06-01 19:46:49.206433"
          },
          {
            "id": "45",
            "program_function_name": "find accs for party role",
            "group_name": null,
            "url": "\/party_manager\/account\/find_account_party_role",
            "program_function_sequence": "8",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.21549",
            "updated_at": "2017-06-01 19:46:49.215491"
          }
        ]
      },
      {
        "id": "6",
        "program_name": "contact_methods",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.222138",
        "updated_at": "2017-06-01 19:46:49.222139",
        "progfuncs": [
          {
            "id": "46",
            "program_function_name": "list contact methods",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/list_contact_methods",
            "program_function_sequence": "1",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.230324",
            "updated_at": "2017-06-01 19:46:49.230326"
          },
          {
            "id": "47",
            "program_function_name": "search contact methods flat",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/search_contact_methods_flat",
            "program_function_sequence": "2",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.255921",
            "updated_at": "2017-06-01 19:46:49.255922"
          },
          {
            "id": "48",
            "program_function_name": "search contact methods hierarchy",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/search_contact_methods_hierarchy",
            "program_function_sequence": "3",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.267003",
            "updated_at": "2017-06-01 19:46:49.267004"
          },
          {
            "id": "49",
            "program_function_name": "new contact method",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/new_contact_method",
            "program_function_sequence": "4",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.275615",
            "updated_at": "2017-06-01 19:46:49.275616"
          },
          {
            "id": "50",
            "program_function_name": "list contact method types",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/list_contact_method_types",
            "program_function_sequence": "5",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.283919",
            "updated_at": "2017-06-01 19:46:49.28392"
          },
          {
            "id": "51",
            "program_function_name": "new contact method type",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/new_contact_method_type",
            "program_function_sequence": "6",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.292014",
            "updated_at": "2017-06-01 19:46:49.292015"
          },
          {
            "id": "52",
            "program_function_name": "find party contact methods",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/find_party_contact_methods",
            "program_function_sequence": "7",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.301269",
            "updated_at": "2017-06-01 19:46:49.30127"
          },
          {
            "id": "53",
            "program_function_name": "add party contact method",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/add_party_contact_method",
            "program_function_sequence": "8",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.309515",
            "updated_at": "2017-06-01 19:46:49.309517"
          },
          {
            "id": "54",
            "program_function_name": "new postal address type",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/new_postal_address_type",
            "program_function_sequence": "9",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.31775",
            "updated_at": "2017-06-01 19:46:49.317751"
          },
          {
            "id": "55",
            "program_function_name": "new postal address",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/new_postal_address",
            "program_function_sequence": "10",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.326171",
            "updated_at": "2017-06-01 19:46:49.326173"
          },
          {
            "id": "56",
            "program_function_name": "find postal addresses",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/search_postal_addresses_hierarchy",
            "program_function_sequence": "11",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.335367",
            "updated_at": "2017-06-01 19:46:49.335368"
          },
          {
            "id": "57",
            "program_function_name": "add party address",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/add_party_address",
            "program_function_sequence": "12",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.3434",
            "updated_at": "2017-06-01 19:46:49.343401"
          },
          {
            "id": "58",
            "program_function_name": "find party address",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/find_party_address",
            "program_function_sequence": "13",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.351527",
            "updated_at": "2017-06-01 19:46:49.35153"
          },
          {
            "id": "59",
            "program_function_name": "search parties addresses",
            "group_name": null,
            "url": "\/party_manager\/contact_method\/search_parties_postal_addresses_flat",
            "program_function_sequence": "14",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.365707",
            "updated_at": "2017-06-01 19:46:49.365708"
          }
        ]
      },
      {
        "id": "7",
        "program_name": "farms",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.372525",
        "updated_at": "2017-06-01 19:46:49.372526",
        "progfuncs": [
          {
            "id": "60",
            "program_function_name": "list farms",
            "group_name": null,
            "url": "\/party_manager\/farm\/list_farms",
            "program_function_sequence": "1",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.379886",
            "updated_at": "2017-06-01 19:46:49.379887"
          },
          {
            "id": "61",
            "program_function_name": "search farms",
            "group_name": null,
            "url": "\/party_manager\/farm\/search_farms_flat",
            "program_function_sequence": "2",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.388061",
            "updated_at": "2017-06-01 19:46:49.388062"
          },
          {
            "id": "62",
            "program_function_name": "find farms",
            "group_name": null,
            "url": "\/party_manager\/farm\/search_farms_hierarchy",
            "program_function_sequence": "3",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.39678",
            "updated_at": "2017-06-01 19:46:49.396782"
          },
          {
            "id": "63",
            "program_function_name": "new farm",
            "group_name": null,
            "url": "\/party_manager\/farm\/new_farm",
            "program_function_sequence": "4",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.425261",
            "updated_at": "2017-06-01 19:46:49.425262"
          },
          {
            "id": "64",
            "program_function_name": "new puc type",
            "group_name": null,
            "url": "\/party_manager\/farm\/new_puc_type",
            "program_function_sequence": "5",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.433291",
            "updated_at": "2017-06-01 19:46:49.433292"
          },
          {
            "id": "65",
            "program_function_name": "list puc types",
            "group_name": null,
            "url": "\/party_manager\/farm\/list_puc_types",
            "program_function_sequence": "6",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.441697",
            "updated_at": "2017-06-01 19:46:49.441698"
          },
          {
            "id": "66",
            "program_function_name": "new puc",
            "group_name": null,
            "url": "\/party_manager\/farm\/new_puc",
            "program_function_sequence": "7",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.451524",
            "updated_at": "2017-06-01 19:46:49.451525"
          },
          {
            "id": "67",
            "program_function_name": "find_pucs",
            "group_name": null,
            "url": "\/party_manager\/farm\/search_pucs_hierarchy",
            "program_function_sequence": "8",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.459172",
            "updated_at": "2017-06-01 19:46:49.459173"
          },
          {
            "id": "68",
            "program_function_name": "new farm group",
            "group_name": null,
            "url": "\/party_manager\/farm\/new_farm_group",
            "program_function_sequence": "9",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.466893",
            "updated_at": "2017-06-01 19:46:49.466894"
          },
          {
            "id": "69",
            "program_function_name": "list farm groups",
            "group_name": null,
            "url": "\/party_manager\/farm\/list_farm_groups",
            "program_function_sequence": "10",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.475154",
            "updated_at": "2017-06-01 19:46:49.475155"
          },
          {
            "id": "70",
            "program_function_name": "add farm puc",
            "group_name": null,
            "url": "\/party_manager\/farm\/new_farm_puc_account",
            "program_function_sequence": "11",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.483435",
            "updated_at": "2017-06-01 19:46:49.483436"
          },
          {
            "id": "71",
            "program_function_name": "find farm pucs",
            "group_name": null,
            "url": "\/party_manager\/farm\/search_farm_puc_accounts_hierarchy",
            "program_function_sequence": "12",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.494522",
            "updated_at": "2017-06-01 19:46:49.494523"
          },
          {
            "id": "72",
            "program_function_name": "search farm pucs",
            "group_name": null,
            "url": "\/party_manager\/farm\/search_farm_puc_accounts_flat",
            "program_function_sequence": "13",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.504285",
            "updated_at": "2017-06-01 19:46:49.504286"
          }
        ]
      },
      {
        "id": "8",
        "program_name": "messages",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.513095",
        "updated_at": "2017-06-01 19:46:49.513097",
        "progfuncs": [
          {
            "id": "73",
            "program_function_name": "find user",
            "group_name": null,
            "url": "\/party_manager\/messages\/find_user",
            "program_function_sequence": "1",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.520739",
            "updated_at": "2017-06-01 19:46:49.52074"
          },
          {
            "id": "74",
            "program_function_name": "set department message",
            "group_name": null,
            "url": "\/party_manager\/messages\/set_department_message",
            "program_function_sequence": "2",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.528848",
            "updated_at": "2017-06-01 19:46:49.528849"
          },
          {
            "id": "75",
            "program_function_name": "set company message",
            "group_name": null,
            "url": "\/party_manager\/messages\/set_company_message",
            "program_function_sequence": "3",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:49.536718",
            "updated_at": "2017-06-01 19:46:49.536719"
          }
        ]
      },
      {
        "id": "3",
        "program_name": "organizations",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.873592",
        "updated_at": "2017-06-01 19:46:48.873593",
        "progfuncs": [
          {
            "id": "12",
            "program_function_name": "list orgs",
            "group_name": null,
            "url": "\/party_manager\/organization\/list_organizations",
            "program_function_sequence": "1",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.88133",
            "updated_at": "2017-06-01 19:46:48.881331"
          },
          {
            "id": "13",
            "program_function_name": "search orgs",
            "group_name": null,
            "url": "\/party_manager\/organization\/search_organizations_flat",
            "program_function_sequence": "2",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.8893",
            "updated_at": "2017-06-01 19:46:48.889301"
          },
          {
            "id": "14",
            "program_function_name": "find org",
            "group_name": null,
            "url": "\/party_manager\/organization\/search_organizations_hierarchy",
            "program_function_sequence": "3",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.901117",
            "updated_at": "2017-06-01 19:46:48.901118"
          },
          {
            "id": "15",
            "program_function_name": "new org",
            "group_name": null,
            "url": "\/party_manager\/organization\/new_organization",
            "program_function_sequence": "4",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.908925",
            "updated_at": "2017-06-01 19:46:48.908926"
          },
          {
            "id": "16",
            "program_function_name": "add org target market",
            "group_name": null,
            "url": "\/party_manager\/organization\/add_org_target_market",
            "program_function_sequence": "5",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.917382",
            "updated_at": "2017-06-01 19:46:48.917383"
          },
          {
            "id": "17",
            "program_function_name": "find org target market",
            "group_name": null,
            "url": "\/party_manager\/organization\/find_org_target_market",
            "program_function_sequence": "6",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.926709",
            "updated_at": "2017-06-01 19:46:48.926712"
          },
          {
            "id": "18",
            "program_function_name": "add org inv code",
            "group_name": null,
            "url": "\/party_manager\/organization\/add_org_inventory_code",
            "program_function_sequence": "7",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.937011",
            "updated_at": "2017-06-01 19:46:48.937012"
          },
          {
            "id": "19",
            "program_function_name": "find org inv code",
            "group_name": null,
            "url": "\/party_manager\/organization\/find_org_inventory_code",
            "program_function_sequence": "8",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.945393",
            "updated_at": "2017-06-01 19:46:48.945395"
          },
          {
            "id": "20",
            "program_function_name": "add org mark",
            "group_name": null,
            "url": "\/party_manager\/organization\/add_org_mark",
            "program_function_sequence": "9",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.953534",
            "updated_at": "2017-06-01 19:46:48.953535"
          },
          {
            "id": "21",
            "program_function_name": "find org mark",
            "group_name": null,
            "url": "\/party_manager\/organization\/find_org_mark",
            "program_function_sequence": "10",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.972496",
            "updated_at": "2017-06-01 19:46:48.972498"
          }
        ]
      },
      {
        "id": "2",
        "program_name": "parties_roles",
        "active": "t",
        "created_at": "2017-06-01 19:46:25.691475",
        "updated_at": "2017-06-01 19:46:25.691476",
        "progfuncs": [
          {
            "id": "6",
            "program_function_name": "list parties roles",
            "group_name": null,
            "url": "\/party_manager\/parties_role\/list_parties_roles",
            "program_function_sequence": "1",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:25.699718",
            "updated_at": "2017-06-01 19:46:25.699719"
          },
          {
            "id": "7",
            "program_function_name": "search ",
            "group_name": null,
            "url": "\/party_manager\/parties_role\/search_parties_roles_flat",
            "program_function_sequence": "2",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.830803",
            "updated_at": "2017-06-01 19:46:48.830804"
          },
          {
            "id": "8",
            "program_function_name": "find",
            "group_name": null,
            "url": "\/party_manager\/parties_role\/search_parties_roles_hierarchy",
            "program_function_sequence": "3",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.839446",
            "updated_at": "2017-06-01 19:46:48.839447"
          },
          {
            "id": "9",
            "program_function_name": "new party role",
            "group_name": null,
            "url": "\/party_manager\/parties_role\/new_parties_role",
            "program_function_sequence": "4",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.848764",
            "updated_at": "2017-06-01 19:46:48.848766"
          },
          {
            "id": "10",
            "program_function_name": "new role",
            "group_name": null,
            "url": "\/party_manager\/parties_role\/new_role",
            "program_function_sequence": "5",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.856307",
            "updated_at": "2017-06-01 19:46:48.856309"
          },
          {
            "id": "11",
            "program_function_name": "list roles",
            "group_name": null,
            "url": "\/party_manager\/parties_role\/list_roles",
            "program_function_sequence": "6",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:48.866406",
            "updated_at": "2017-06-01 19:46:48.866408"
          }
        ]
      },
      {
        "id": "1",
        "program_name": "people",
        "active": "t",
        "created_at": "2017-06-01 19:45:18.741309",
        "updated_at": "2017-06-01 19:45:18.74131",
        "progfuncs": [
          {
            "id": "2",
            "program_function_name": "list people",
            "group_name": null,
            "url": "\/party_manager\/person\/list_people",
            "program_function_sequence": "1",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:45:50.708614",
            "updated_at": "2017-06-01 19:45:50.708616"
          },
          {
            "id": "3",
            "program_function_name": "search people",
            "group_name": null,
            "url": "\/party_manager\/person\/search_people_flat",
            "program_function_sequence": "2",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:25.66569",
            "updated_at": "2017-06-01 19:46:25.665691"
          },
          {
            "id": "4",
            "program_function_name": "find person",
            "group_name": null,
            "url": "\/party_manager\/person\/search_people_hierarchy",
            "program_function_sequence": "3",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:25.675584",
            "updated_at": "2017-06-01 19:46:25.675585"
          },
          {
            "id": "5",
            "program_function_name": "new person",
            "group_name": null,
            "url": "\/party_manager\/person\/new_person",
            "program_function_sequence": "4",
            "restricted_user_access": "f",
            "active": "t",
            "created_at": "2017-06-01 19:46:25.683612",
            "updated_at": "2017-06-01 19:46:25.683613"
          }
        ]
      }
    ]
  }
]
// var rowData =
var twoRowData =
[
  {
    "id": "5",
    "functional_area_name": "Master files",
    "program_name": "accounts",
    "active": "t",
    "created_at": "2017-06-01 19:46:49.139262",
    "updated_at": null,
    "progfuncs": [
      {
        "id": "38",
        "program_function_name": "list accounts",
        "group_name": null,
        "url": "\/party_manager\/account\/list_accounts",
        "program_function_sequence": "1",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.147779",
        "updated_at": "2017-06-01 19:46:49.14778"
      },
      {
        "id": "39",
        "program_function_name": "search accounts",
        "group_name": null,
        "url": "\/party_manager\/account\/search_accounts_flat",
        "program_function_sequence": "2",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.155767",
        "updated_at": "2017-06-01 19:46:49.155768"
      },
      {
        "id": "40",
        "program_function_name": "find accounts",
        "group_name": null,
        "url": "\/party_manager\/account\/search_accounts_hierarchy",
        "program_function_sequence": "3",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.163762",
        "updated_at": "2017-06-01 19:46:49.163763"
      },
      {
        "id": "41",
        "program_function_name": "new account",
        "group_name": null,
        "url": "\/party_manager\/account\/new_account",
        "program_function_sequence": "4",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.172091",
        "updated_at": "2017-06-01 19:46:49.172093"
      },
      {
        "id": "42",
        "program_function_name": "list account types",
        "group_name": null,
        "url": "\/party_manager\/account\/list_account_types",
        "program_function_sequence": "5",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.184212",
        "updated_at": "2017-06-01 19:46:49.184213"
      },
      {
        "id": "43",
        "program_function_name": "new account type",
        "group_name": null,
        "url": "\/party_manager\/account\/new_account_type",
        "program_function_sequence": "6",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.194959",
        "updated_at": "2017-06-01 19:46:49.19496"
      },
      {
        "id": "44",
        "program_function_name": "add acc to party_role",
        "group_name": null,
        "url": "\/party_manager\/account\/add_account_party_role",
        "program_function_sequence": "7",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.206431",
        "updated_at": "2017-06-01 19:46:49.206433"
      },
      {
        "id": "45",
        "program_function_name": "find accs for party role",
        "group_name": null,
        "url": "\/party_manager\/account\/find_account_party_role",
        "program_function_sequence": "8",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.21549",
        "updated_at": "2017-06-01 19:46:49.215491"
      }
    ]
  },
  {
    "id": "6",
    "functional_area_name": "Master files",
    "program_name": "contact_methods",
    "active": "t",
    "created_at": "2017-06-01 19:46:49.222138",
    "updated_at": null,
    "progfuncs": [
      {
        "id": "46",
        "program_function_name": "list contact methods",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/list_contact_methods",
        "program_function_sequence": "1",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.230324",
        "updated_at": "2017-06-01 19:46:49.230326"
      },
      {
        "id": "47",
        "program_function_name": "search contact methods flat",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/search_contact_methods_flat",
        "program_function_sequence": "2",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.255921",
        "updated_at": "2017-06-01 19:46:49.255922"
      },
      {
        "id": "48",
        "program_function_name": "search contact methods hierarchy",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/search_contact_methods_hierarchy",
        "program_function_sequence": "3",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.267003",
        "updated_at": "2017-06-01 19:46:49.267004"
      },
      {
        "id": "49",
        "program_function_name": "new contact method",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/new_contact_method",
        "program_function_sequence": "4",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.275615",
        "updated_at": "2017-06-01 19:46:49.275616"
      },
      {
        "id": "50",
        "program_function_name": "list contact method types",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/list_contact_method_types",
        "program_function_sequence": "5",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.283919",
        "updated_at": "2017-06-01 19:46:49.28392"
      },
      {
        "id": "51",
        "program_function_name": "new contact method type",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/new_contact_method_type",
        "program_function_sequence": "6",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.292014",
        "updated_at": "2017-06-01 19:46:49.292015"
      },
      {
        "id": "52",
        "program_function_name": "find party contact methods",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/find_party_contact_methods",
        "program_function_sequence": "7",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.301269",
        "updated_at": "2017-06-01 19:46:49.30127"
      },
      {
        "id": "53",
        "program_function_name": "add party contact method",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/add_party_contact_method",
        "program_function_sequence": "8",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.309515",
        "updated_at": "2017-06-01 19:46:49.309517"
      },
      {
        "id": "54",
        "program_function_name": "new postal address type",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/new_postal_address_type",
        "program_function_sequence": "9",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.31775",
        "updated_at": "2017-06-01 19:46:49.317751"
      },
      {
        "id": "55",
        "program_function_name": "new postal address",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/new_postal_address",
        "program_function_sequence": "10",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.326171",
        "updated_at": "2017-06-01 19:46:49.326173"
      },
      {
        "id": "56",
        "program_function_name": "find postal addresses",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/search_postal_addresses_hierarchy",
        "program_function_sequence": "11",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.335367",
        "updated_at": "2017-06-01 19:46:49.335368"
      },
      {
        "id": "57",
        "program_function_name": "add party address",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/add_party_address",
        "program_function_sequence": "12",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.3434",
        "updated_at": "2017-06-01 19:46:49.343401"
      },
      {
        "id": "58",
        "program_function_name": "find party address",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/find_party_address",
        "program_function_sequence": "13",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.351527",
        "updated_at": "2017-06-01 19:46:49.35153"
      },
      {
        "id": "59",
        "program_function_name": "search parties addresses",
        "group_name": null,
        "url": "\/party_manager\/contact_method\/search_parties_postal_addresses_flat",
        "program_function_sequence": "14",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.365707",
        "updated_at": "2017-06-01 19:46:49.365708"
      }
    ]
  },
  {
    "id": "7",
    "functional_area_name": "Master files",
    "program_name": "farms",
    "active": "t",
    "created_at": "2017-06-01 19:46:49.372525",
    "updated_at": null,
    "progfuncs": [
      {
        "id": "60",
        "program_function_name": "list farms",
        "group_name": null,
        "url": "\/party_manager\/farm\/list_farms",
        "program_function_sequence": "1",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.379886",
        "updated_at": "2017-06-01 19:46:49.379887"
      },
      {
        "id": "61",
        "program_function_name": "search farms",
        "group_name": null,
        "url": "\/party_manager\/farm\/search_farms_flat",
        "program_function_sequence": "2",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.388061",
        "updated_at": "2017-06-01 19:46:49.388062"
      },
      {
        "id": "62",
        "program_function_name": "find farms",
        "group_name": null,
        "url": "\/party_manager\/farm\/search_farms_hierarchy",
        "program_function_sequence": "3",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.39678",
        "updated_at": "2017-06-01 19:46:49.396782"
      },
      {
        "id": "63",
        "program_function_name": "new farm",
        "group_name": null,
        "url": "\/party_manager\/farm\/new_farm",
        "program_function_sequence": "4",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.425261",
        "updated_at": "2017-06-01 19:46:49.425262"
      },
      {
        "id": "64",
        "program_function_name": "new puc type",
        "group_name": null,
        "url": "\/party_manager\/farm\/new_puc_type",
        "program_function_sequence": "5",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.433291",
        "updated_at": "2017-06-01 19:46:49.433292"
      },
      {
        "id": "65",
        "program_function_name": "list puc types",
        "group_name": null,
        "url": "\/party_manager\/farm\/list_puc_types",
        "program_function_sequence": "6",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.441697",
        "updated_at": "2017-06-01 19:46:49.441698"
      },
      {
        "id": "66",
        "program_function_name": "new puc",
        "group_name": null,
        "url": "\/party_manager\/farm\/new_puc",
        "program_function_sequence": "7",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.451524",
        "updated_at": "2017-06-01 19:46:49.451525"
      },
      {
        "id": "67",
        "program_function_name": "find_pucs",
        "group_name": null,
        "url": "\/party_manager\/farm\/search_pucs_hierarchy",
        "program_function_sequence": "8",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.459172",
        "updated_at": "2017-06-01 19:46:49.459173"
      },
      {
        "id": "68",
        "program_function_name": "new farm group",
        "group_name": null,
        "url": "\/party_manager\/farm\/new_farm_group",
        "program_function_sequence": "9",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.466893",
        "updated_at": "2017-06-01 19:46:49.466894"
      },
      {
        "id": "69",
        "program_function_name": "list farm groups",
        "group_name": null,
        "url": "\/party_manager\/farm\/list_farm_groups",
        "program_function_sequence": "10",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.475154",
        "updated_at": "2017-06-01 19:46:49.475155"
      },
      {
        "id": "70",
        "program_function_name": "add farm puc",
        "group_name": null,
        "url": "\/party_manager\/farm\/new_farm_puc_account",
        "program_function_sequence": "11",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.483435",
        "updated_at": "2017-06-01 19:46:49.483436"
      },
      {
        "id": "71",
        "program_function_name": "find farm pucs",
        "group_name": null,
        "url": "\/party_manager\/farm\/search_farm_puc_accounts_hierarchy",
        "program_function_sequence": "12",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.494522",
        "updated_at": "2017-06-01 19:46:49.494523"
      },
      {
        "id": "72",
        "program_function_name": "search farm pucs",
        "group_name": null,
        "url": "\/party_manager\/farm\/search_farm_puc_accounts_flat",
        "program_function_sequence": "13",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.504285",
        "updated_at": "2017-06-01 19:46:49.504286"
      }
    ]
  },
  {
    "id": "8",
    "functional_area_name": "Master files",
    "program_name": "messages",
    "active": "t",
    "created_at": "2017-06-01 19:46:49.513095",
    "updated_at": null,
    "progfuncs": [
      {
        "id": "73",
        "program_function_name": "find user",
        "group_name": null,
        "url": "\/party_manager\/messages\/find_user",
        "program_function_sequence": "1",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.520739",
        "updated_at": "2017-06-01 19:46:49.52074"
      },
      {
        "id": "74",
        "program_function_name": "set department message",
        "group_name": null,
        "url": "\/party_manager\/messages\/set_department_message",
        "program_function_sequence": "2",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.528848",
        "updated_at": "2017-06-01 19:46:49.528849"
      },
      {
        "id": "75",
        "program_function_name": "set company message",
        "group_name": null,
        "url": "\/party_manager\/messages\/set_company_message",
        "program_function_sequence": "3",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:49.536718",
        "updated_at": "2017-06-01 19:46:49.536719"
      }
    ]
  },
  {
    "id": "3",
    "functional_area_name": "Master files",
    "program_name": "organizations",
    "active": "t",
    "created_at": "2017-06-01 19:46:48.873592",
    "updated_at": null,
    "progfuncs": [
      {
        "id": "12",
        "program_function_name": "list orgs",
        "group_name": null,
        "url": "\/party_manager\/organization\/list_organizations",
        "program_function_sequence": "1",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.88133",
        "updated_at": "2017-06-01 19:46:48.881331"
      },
      {
        "id": "13",
        "program_function_name": "search orgs",
        "group_name": null,
        "url": "\/party_manager\/organization\/search_organizations_flat",
        "program_function_sequence": "2",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.8893",
        "updated_at": "2017-06-01 19:46:48.889301"
      },
      {
        "id": "14",
        "program_function_name": "find org",
        "group_name": null,
        "url": "\/party_manager\/organization\/search_organizations_hierarchy",
        "program_function_sequence": "3",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.901117",
        "updated_at": "2017-06-01 19:46:48.901118"
      },
      {
        "id": "15",
        "program_function_name": "new org",
        "group_name": null,
        "url": "\/party_manager\/organization\/new_organization",
        "program_function_sequence": "4",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.908925",
        "updated_at": "2017-06-01 19:46:48.908926"
      },
      {
        "id": "16",
        "program_function_name": "add org target market",
        "group_name": null,
        "url": "\/party_manager\/organization\/add_org_target_market",
        "program_function_sequence": "5",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.917382",
        "updated_at": "2017-06-01 19:46:48.917383"
      },
      {
        "id": "17",
        "program_function_name": "find org target market",
        "group_name": null,
        "url": "\/party_manager\/organization\/find_org_target_market",
        "program_function_sequence": "6",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.926709",
        "updated_at": "2017-06-01 19:46:48.926712"
      },
      {
        "id": "18",
        "program_function_name": "add org inv code",
        "group_name": null,
        "url": "\/party_manager\/organization\/add_org_inventory_code",
        "program_function_sequence": "7",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.937011",
        "updated_at": "2017-06-01 19:46:48.937012"
      },
      {
        "id": "19",
        "program_function_name": "find org inv code",
        "group_name": null,
        "url": "\/party_manager\/organization\/find_org_inventory_code",
        "program_function_sequence": "8",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.945393",
        "updated_at": "2017-06-01 19:46:48.945395"
      },
      {
        "id": "20",
        "program_function_name": "add org mark",
        "group_name": null,
        "url": "\/party_manager\/organization\/add_org_mark",
        "program_function_sequence": "9",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.953534",
        "updated_at": "2017-06-01 19:46:48.953535"
      },
      {
        "id": "21",
        "program_function_name": "find org mark",
        "group_name": null,
        "url": "\/party_manager\/organization\/find_org_mark",
        "program_function_sequence": "10",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.972496",
        "updated_at": "2017-06-01 19:46:48.972498"
      }
    ]
  },
  {
    "id": "2",
    "functional_area_name": "Master files",
    "program_name": "parties_roles",
    "active": "t",
    "created_at": "2017-06-01 19:46:25.691475",
    "updated_at": null,
    "progfuncs": [
      {
        "id": "6",
        "program_function_name": "list parties roles",
        "group_name": null,
        "url": "\/party_manager\/parties_role\/list_parties_roles",
        "program_function_sequence": "1",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:25.699718",
        "updated_at": "2017-06-01 19:46:25.699719"
      },
      {
        "id": "7",
        "program_function_name": "search ",
        "group_name": null,
        "url": "\/party_manager\/parties_role\/search_parties_roles_flat",
        "program_function_sequence": "2",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.830803",
        "updated_at": "2017-06-01 19:46:48.830804"
      },
      {
        "id": "8",
        "program_function_name": "find",
        "group_name": null,
        "url": "\/party_manager\/parties_role\/search_parties_roles_hierarchy",
        "program_function_sequence": "3",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.839446",
        "updated_at": "2017-06-01 19:46:48.839447"
      },
      {
        "id": "9",
        "program_function_name": "new party role",
        "group_name": null,
        "url": "\/party_manager\/parties_role\/new_parties_role",
        "program_function_sequence": "4",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.848764",
        "updated_at": "2017-06-01 19:46:48.848766"
      },
      {
        "id": "10",
        "program_function_name": "new role",
        "group_name": null,
        "url": "\/party_manager\/parties_role\/new_role",
        "program_function_sequence": "5",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.856307",
        "updated_at": "2017-06-01 19:46:48.856309"
      },
      {
        "id": "11",
        "program_function_name": "list roles",
        "group_name": null,
        "url": "\/party_manager\/parties_role\/list_roles",
        "program_function_sequence": "6",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:48.866406",
        "updated_at": "2017-06-01 19:46:48.866408"
      }
    ]
  },
  {
    "id": "1",
    "functional_area_name": "Master files",
    "program_name": "people",
    "active": "t",
    "created_at": "2017-06-01 19:45:18.741309",
    "updated_at": null,
    "progfuncs": [
      {
        "id": "2",
        "program_function_name": "list people",
        "group_name": null,
        "url": "\/party_manager\/person\/list_people",
        "program_function_sequence": "1",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:45:50.708614",
        "updated_at": "2017-06-01 19:45:50.708616"
      },
      {
        "id": "3",
        "program_function_name": "search people",
        "group_name": null,
        "url": "\/party_manager\/person\/search_people_flat",
        "program_function_sequence": "2",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:25.66569",
        "updated_at": "2017-06-01 19:46:25.665691"
      },
      {
        "id": "4",
        "program_function_name": "find person",
        "group_name": null,
        "url": "\/party_manager\/person\/search_people_hierarchy",
        "program_function_sequence": "3",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:25.675584",
        "updated_at": "2017-06-01 19:46:25.675585"
      },
      {
        "id": "5",
        "program_function_name": "new person",
        "group_name": null,
        "url": "\/party_manager\/person\/new_person",
        "program_function_sequence": "4",
        "restricted_user_access": "f",
        "active": "t",
        "created_at": "2017-06-01 19:46:25.683612",
        "updated_at": "2017-06-01 19:46:25.683613"
      }
    ]
  }
]

    //hs = {id: row['program_id'], functional_area_name: row['functional_area_name'], program_name: row['program_name'], active: row['p_active'], created_at: row['p_created_at'], updated_at: row['updated_at'],
var masterColumnDefs = [
  {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,
    // "valueGetter":"[{text:'Edit', url:'/masterfiles/users/users/'+data.id+'/edit|edit'},{text:'Delete', url: '/masterfiles/users/users/'+data.id+'|delete|Are you sure?'}]",
    "colId":"link_1",
    valueGetter:'[{text:"Edit", url: "/security/functional_areas/functional_areas/$col$/edit", col: "id"},{text:"Delete", url: "/masterfiles/users/users/$col$/delete", prompt: "Are you sure?", col: "id", method: "delete", title: "Functional Area"}]',
    // valueGetter:'[]',
    "cellRenderer": crossbeamsGridFormatters.menuActionsRenderer},

  // {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,"valueGetter":"'/masterfiles/users/users/'+data.id+'/edit|edit'","colId":"link_0","cellRenderer":crossbeamsGridFormatters.hrefSimpleFormatter},
  // {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,"valueGetter":"'/masterfiles/users/users/'+data.id+'|delete|Are you sure?'","colId":"link_1","cellRenderer":crossbeamsGridFormatters.hrefPromptFormatter},
  {headerName: 'Functional Area', field: 'functional_area_name',
    // left column is going to act as group column, with the expand / contract controls
    cellRenderer: 'group',
    // we don't want the child count - it would be one each time anyway as each parent
    // not has exactly one child node
    cellRendererParams: { suppressCount: true }
  },
  // {headerName: 'Program', field: 'program_name'},
  {headerName: 'ID', field: 'id', cellClass: 'grid-number-column'},
  {headerName: 'Active', field: 'active', cellClass: "grid-boolean-column", cellRenderer: crossbeamsGridFormatters.booleanFormatter},
  {headerName: 'Created', field:'created_at'},
  {headerName: 'Updated', field:'updated_at'}
];
var midLevelColumnDefs = [
  // {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,"valueGetter":"'/masterfiles/users/users/'+data.id+'/edit|edit'","colId":"link_0","cellRenderer":crossbeamsGridFormatters.hrefSimpleFormatter},
  // {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,"valueGetter":"'/masterfiles/users/users/'+data.id+'|delete|Are you sure?'","colId":"link_1","cellRenderer":crossbeamsGridFormatters.hrefPromptFormatter},
  // {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,
    // // "valueGetter":"[{text:'Edit', url:'/masterfiles/users/users/'+data.id+'/edit|edit'},{text:'Delete', url: '/masterfiles/users/users/'+data.id+'|delete|Are you sure?'}]",
    // "colId":"link_1",
    // "valueGetter":"Edit",
    // "cellRenderer":actionsRenderer},

  {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,
    // "valueGetter":"[{text:'Edit', url:'/masterfiles/users/users/'+data.id+'/edit|edit'},{text:'Delete', url: '/masterfiles/users/users/'+data.id+'|delete|Are you sure?'}]",
    "colId":"link_1",
    valueGetter:'[{text:"Edit", url: "/masterfiles/users/users/$col$/edit", col: "id"},{text:"Delete", url: "/masterfiles/users/users/$col$/delete", prompt: "Are you sure?", col: "id"}]',
    // valueGetter:'[]',
    "cellRenderer": crossbeamsGridFormatters.menuActionsRenderer},
  {headerName: 'Program', field: 'program_name',
    // left column is going to act as group column, with the expand / contract controls
    cellRenderer: 'group',
    // we don't want the child count - it would be one each time anyway as each parent
    // not has exactly one child node
    cellRendererParams: { suppressCount: true }
  },
  // {headerName: 'Program', field: 'program_name'},
  {headerName: 'ID', field: 'id', cellClass: 'grid-number-column'},
  {headerName: 'Active', field: 'active', cellClass: "grid-boolean-column", cellRenderer: crossbeamsGridFormatters.booleanFormatter},
  {headerName: 'Created', field:'created_at'},
  {headerName: 'Updated', field:'updated_at'}
];

  // nh = {id: row['id'], program_function_name: row['program_function_name'], group_name: row['group_name'], url: row['url'], program_function_sequence: row['program_function_sequence'],
var detailColumnDefs = [
  {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,
    // "valueGetter":"[{text:'Edit', url:'/masterfiles/users/users/'+data.id+'/edit|edit'},{text:'Delete', url: '/masterfiles/users/users/'+data.id+'|delete|Are you sure?'}]",
    "colId":"link_1",
    valueGetter:'[{text:"Edit", url: "/masterfiles/users/users/$col$/edit", col: "id"},{text:"Delete", url: "/masterfiles/users/users/$col$/delete", prompt: "Are you sure?", col: "id"}]',
    // valueGetter:'[]',
    "cellRenderer": crossbeamsGridFormatters.menuActionsRenderer},
  // {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,"valueGetter":"'/masterfiles/users/users/'+data.id+'/edit|edit'","colId":"link_0","cellRenderer":crossbeamsGridFormatters.hrefSimpleFormatter},
  // {"headerName":"","width":60,"suppressMenu":true,"suppressSorting":true,"suppressMovable":true,"suppressFilter":true,"enableRowGroup":false,"enablePivot":false,"enableValue":false,"suppressCsvExport":true,"suppressToolPanel":true,"valueGetter":"'/masterfiles/users/users/'+data.id+'|delete|Are you sure?'","colId":"link_1","cellRenderer":crossbeamsGridFormatters.hrefPromptFormatter},
  {headerName: 'Program function name', field: 'program_function_name'},
  {headerName: 'ID', field: 'id', cellClass: 'grid-number-column'},
  {headerName: 'Group', field: 'group_name'},
  {headerName: 'URL', field: 'url'},
  {headerName: 'Seq', field: 'program_function_sequence', cellClass: 'grid-number-column'},
  {headerName: 'User restricted', field: 'restricted_user_access', cellClass: "grid-boolean-column", cellRenderer: crossbeamsGridFormatters.booleanFormatter},
  {headerName: 'Active', field: 'active', cellClass: "grid-boolean-column", cellRenderer: crossbeamsGridFormatters.booleanFormatter},
  {headerName: 'Created', field:'created_at'},
  {headerName: 'Updated', field:'updated_at'}
];

function MidLevelPanelCellRenderer() {}

MidLevelPanelCellRenderer.prototype.init = function(params) {
  // trick to convert string of html into dom object
  var eTemp = document.createElement('div');
  eTemp.innerHTML = this.getTemplate(params);
  this.eGui = eTemp.firstElementChild;

  this.setupMidLevelGrid(params.data);
  this.consumeMouseWheelOnDetailGrid();
  this.addSeachFeature();
  // this.addButtonListeners();
};

MidLevelPanelCellRenderer.prototype.setupMidLevelGrid = function(programs) {

  this.midLevelGridOptions = {
    enableSorting: true,
    // enableFilter: true,
    enableColResize: true,
    rowData: programs,
    columnDefs: midLevelColumnDefs,
  suppressMenuFilterPanel: true,
  isFullWidthCell: function(rowNode) {
    return rowNode.level === 1;
  },
    onGridReady: function(params) {
      setTimeout( function() { params.api.sizeColumnsToFit(); }, 0);
    },
  // see ag-Grid docs cellRenderer for details on how to build cellRenderers
  fullWidthCellRenderer: DetailPanelCellRenderer,
  getRowHeight: function(params) {
    var rowIsDetailRow = params.node.level===1;
    // return 100 when detail row, otherwise return 25
    return rowIsDetailRow ? 200 : 25;
  },
  getNodeChildDetails: function(record) {
    if (record.progfuncs) {
      return {
        group: true,
        // the key is used by the default group cellRenderer
        key: record.program_name,
        // provide ag-Grid with the children of this group
        children: [record.progfuncs]
        // for demo, expand the third row by default
        // expanded: record.account === 177005
      };
    } else {
      return null;
    }
  }
  };

  var eDetailGrid = this.eGui.querySelector('.full-width-grid');
  new agGrid.Grid(eDetailGrid, this.midLevelGridOptions);
};

MidLevelPanelCellRenderer.prototype.getTemplate = function(params) {

  var parentRecord = params.node.parent.data;

  var template =
    '<div class="full-width-panel">' +
    '  <div class="full-width-grid" style="height:100%"></div>' +
    '  <div class="full-width-grid-toolbar">' +
    '       <b>Functional area: </b>'+parentRecord.functional_area_name +
    '       <input class="full-width-search" placeholder="Search..."/>' +
    '       <button>Add a Program</button>' +
    '  </div>'+
    '</div>';

  return template;
};

MidLevelPanelCellRenderer.prototype.getGui = function() {
  return this.eGui;
};

MidLevelPanelCellRenderer.prototype.destroy = function() {
  this.midLevelGridOptions.api.destroy();
};

MidLevelPanelCellRenderer.prototype.addSeachFeature = function() {
  var tfSearch = this.eGui.querySelector('.full-width-search');
  var gridApi = this.midLevelGridOptions.api;

  var searchListener = function() {
    var filterText = tfSearch.value;
    gridApi.setQuickFilter(filterText);
  };

  tfSearch.addEventListener('input', searchListener);
};

// MidLevelPanelCellRenderer.prototype.addButtonListeners = function() {
//   var eButtons = this.eGui.querySelectorAll('.full-width-grid-toolbar button');
//
//   for (var i = 0;  i<eButtons.length; i++) {
//     eButtons[i].addEventListener('click', function() {
//       window.alert('Sample button pressed!!');
//     });
//   }
// };

// if we don't do this, then the mouse wheel will be picked up by the main
// grid and scroll the main grid and not this component. this ensures that
// the wheel move is only picked up by the text field
MidLevelPanelCellRenderer.prototype.consumeMouseWheelOnDetailGrid = function() {
  var eDetailGrid = this.eGui.querySelector('.full-width-grid');

  var mouseWheelListener = function(event) {
    event.stopPropagation();
  };

  // event is 'mousewheel' for IE9, Chrome, Safari, Opera
  eDetailGrid.addEventListener('mousewheel', mouseWheelListener);
  // event is 'DOMMouseScroll' Firefox
  eDetailGrid.addEventListener('DOMMouseScroll', mouseWheelListener);
};

function DetailPanelCellRenderer() {}

DetailPanelCellRenderer.prototype.init = function(params) {
  // trick to convert string of html into dom object
  var eTemp = document.createElement('div');
  eTemp.innerHTML = this.getTemplate(params);
  this.eGui = eTemp.firstElementChild;

  this.setupDetailGrid(params.data);
  this.consumeMouseWheelOnDetailGrid();
  this.addSeachFeature();
  // this.addButtonListeners();
};

DetailPanelCellRenderer.prototype.setupDetailGrid = function(progfuncs) {

  this.detailGridOptions = {
    enableSorting: true,
    enableFilter: true,
    enableColResize: true,
    rowData: progfuncs,
    columnDefs: detailColumnDefs,
    onGridReady: function(params) {
      setTimeout( function() { params.api.sizeColumnsToFit(); }, 0);
    }
  };

  var eDetailGrid = this.eGui.querySelector('.full-width-grid');
  new agGrid.Grid(eDetailGrid, this.detailGridOptions);
};

DetailPanelCellRenderer.prototype.getTemplate = function(params) {

  var parentRecord = params.node.parent.data;

  var template =
    '<div class="full-width-panel"style="background-color: silver">' +
    '  <div class="full-width-grid" style="height:100%"></div>' +
    '  <div class="full-width-grid-toolbar">' +
    '       <b>Program: </b>'+parentRecord.program_name +
    '       <input class="full-width-search" placeholder="Search..."/>' +
    '       <button>Add a Program Function</button>' +
    '  </div>'+
    '</div>';

  return template;
};

DetailPanelCellRenderer.prototype.getGui = function() {
  return this.eGui;
};

DetailPanelCellRenderer.prototype.destroy = function() {
  this.detailGridOptions.api.destroy();
};

DetailPanelCellRenderer.prototype.addSeachFeature = function() {
  var tfSearch = this.eGui.querySelector('.full-width-search');
  var gridApi = this.detailGridOptions.api;

  var searchListener = function() {
    var filterText = tfSearch.value;
    gridApi.setQuickFilter(filterText);
  };

  tfSearch.addEventListener('input', searchListener);
};

// DetailPanelCellRenderer.prototype.addButtonListeners = function() {
//   var eButtons = this.eGui.querySelectorAll('.full-width-grid-toolbar button');
//
//   for (var i = 0;  i<eButtons.length; i++) {
//     eButtons[i].addEventListener('click', function() {
//       window.alert('Sample button pressed!!');
//     });
//   }
// };

// if we don't do this, then the mouse wheel will be picked up by the main
// grid and scroll the main grid and not this component. this ensures that
// the wheel move is only picked up by the text field
DetailPanelCellRenderer.prototype.consumeMouseWheelOnDetailGrid = function() {
  var eDetailGrid = this.eGui.querySelector('.full-width-grid');

  var mouseWheelListener = function(event) {
    event.stopPropagation();
  };

  // event is 'mousewheel' for IE9, Chrome, Safari, Opera
  eDetailGrid.addEventListener('mousewheel', mouseWheelListener);
  // event is 'DOMMouseScroll' Firefox
  eDetailGrid.addEventListener('DOMMouseScroll', mouseWheelListener);
};

var masterGridOptions = {
  context: 'myGrid',
  columnDefs: masterColumnDefs,
  rowData: rowData,
  enableSorting: true,
  enableColResize: true,
  // we cannot filter on the groups, as filters work on the child nodes, and in this example
  // the child nodes are not aggregations of the parent.
  suppressMenuFilterPanel: true,
  isFullWidthCell: function(rowNode) {
    return rowNode.level === 1;
  },
  onGridReady: function(params) {
    params.api.sizeColumnsToFit();
  },
  // see ag-Grid docs cellRenderer for details on how to build cellRenderers
  fullWidthCellRenderer: MidLevelPanelCellRenderer,
  getRowHeight: function(params) {
    var rowIsDetailRow = params.node.level===1;
    // return 100 when detail row, otherwise return 25
    return rowIsDetailRow ? 400 : 25;
  },
  getNodeChildDetails: function(record) {
    if (record.programs) {
      return {
        group: true,
        // the key is used by the default group cellRenderer
        key: record.functional_area_name,
        // provide ag-Grid with the children of this group
        children: [record.programs]
        // for demo, expand the third row by default
        // expanded: record.account === 177005
      };
    } else {
      return null;
    }
  }
};

// setup the grid after the page has finished loading
document.addEventListener('DOMContentLoaded', function() {
  var gridDiv = document.querySelector('#myGrid');
  new agGrid.Grid(gridDiv, masterGridOptions);
});

</script>
<% end %>
